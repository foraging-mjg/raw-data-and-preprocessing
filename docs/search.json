[{"path":"index.html","id":"first-things-first","chapter":"1 First things first","heading":"1 First things first","text":"Things series two experiments consider experiment one experiment two separately.online version document https://mjgreen.github.io/foraging-paradigm-paper-2022/","code":""},{"path":"introduction.html","id":"introduction","chapter":"2 Introduction","heading":"2 Introduction","text":"experiment 1, computerized gaze contingent task consisted 20 individual trials. trial participants presented display containing 30 trees, 15 contained hidden fruit item target (target apple, represented filled red circle). trial, participant’s task forage retrieve 10 15 fruit items.manipulated one factor within-subjects (Resource Distribution) 2 levels: ‘clumped’ ‘random’.created ten random stimuli 15 target fruit items uniformly distributed 30 trees (random condition) ten stimuli 15 target fruit items arranged one large patch (clumped condition) covered either left right side layout.","code":""},{"path":"number-of-trees.html","id":"number-of-trees","chapter":"3 Number of trees","heading":"3 Number of trees","text":"Experiment 1Here put tables means significant effects.","code":""},{"path":"number-of-revisits.html","id":"number-of-revisits","chapter":"4 Number of revisits","heading":"4 Number of revisits","text":"Experiment 1This 2 (resource distribution) x 2 (trial stage) x 10 (sequential fruit consumed) analysis.","code":""},{"path":"number-of-revisits.html","id":"form-the-dataset","chapter":"4 Number of revisits","heading":"4.1 Form the dataset","text":"ANOVA nowThis ANOVA table","code":"\ne1.raw <- readRDS(\"001-00-e1-data.RDS\")\ne1.sub <- e1.raw %>% select(pp, rr, tb, ix, tl, fl, fr)\ne1.ann <- e1.sub %>% \n  # remove samples that did not look at a tree\n  filter(fl>0) %>% select(-fl) %>% \n  # identify consecutive dupes for removal\n  mutate(dupe = !(is.na(tl != lag(tl)) | tl != lag(tl))) %>% \n  # remove dupes\n  filter(dupe==FALSE) %>% \n  # annotate with revisit\n  group_by(pp, rr, tb) %>% mutate(isrv = duplicated(tl)) %>% ungroup() %>% \n  # annotate with max fruit\n  group_by(pp, rr, tb) %>% mutate(maxf = max(fr)) %>% ungroup() %>% \n  # remove samples in the tenth fruit\n  filter(fr !=10) \n\n# make sure each trial has an entry for the zeroth fruit\nmerge_me = expand_grid(pp = sort(unique(e1.ann$pp)), rr = sort(unique(e1.ann$rr)), tb = sort(unique(e1.ann$tb)), fr = 0)\ne1.ann2 <- full_join(e1.ann, merge_me, by = join_by(pp, rr, tb, fr)) %>% arrange(pp, rr, tb, fr)\n\n# redo isrv such that the zeroth fruit has FALSE for isrv instead of NA\ne1.ann2 <- e1.ann2 %>% replace_na(list(isrv=FALSE))\n\n# redo maxf to replace NA with whatever the max was for that trial\ne1.ann2 <- e1.ann2 %>% group_by(pp,rr,tb) %>% mutate(maxf=max(maxf, na.rm=TRUE)) %>% ungroup()\n\n# remove trials with maxf less than 10\ne1.ann3 <- e1.ann2 %>% filter(maxf == 10)\n\n# add stage\ne1.ann3 <- e1.ann3 %>% mutate(st=ifelse(tb<=5, \"early\", \"late\"))\n\n# aggregate such that there is a row for each fruit visited (including the zeroth but not the tenth)\n# saying how many (sum) revisits there were while searching for that fruit\ne1.agg1 <- e1.ann3 %>% \n  group_by(pp, rr, st, tb, fr) %>% \n  summarise(nrev=sum(isrv)) %>% \n  ungroup()\n\n# aggregate over trials to give mean sum revisits at the relevant fruit for each stage\ne1.agg2 <- e1.agg1 %>% \n  group_by(pp, rr, st, fr) %>% \n  summarise(murev=mean(nrev)) %>% \n  ungroup()\n\n\ndd = e1.agg2\ndd <- dd %>% mutate(pp=as_factor(pp), rr=as_factor(rr), st=as_factor(st), fr=as_factor(fr))\nknitr::include_graphics(\"e1_tables/e1_nrevisits_grand_ANOVA.png\")"},{"path":"number-of-revisits.html","id":"means","chapter":"4 Number of revisits","heading":"4.2 Means","text":"","code":""},{"path":"number-of-revisits.html","id":"significant-stage-effect-means","chapter":"4 Number of revisits","heading":"4.2.1 Significant stage effect means","text":"Now want grand means significant stage effect.","code":"\nstage_means = dd %>% \n  group_by(st, pp, rr, fr) %>% \n  summarise(mu=mean(murev)) %>% \n  summarise(mu=mean(mu)) %>% \n  summarise(mu=mean(mu)) %>% \n  summarise(mean=mean(mu), sd=sd(mu)) %>% \n  mutate(mean=round(mean,2), sd=round(sd,2))\nstage_means %>% knitr::kable()"},{"path":"number-of-revisits.html","id":"significant-fruit-effect-means","chapter":"4 Number of revisits","heading":"4.2.2 Significant fruit effect means","text":"average number revisits made searching first fruit item \n0.06 +/- 0.07.\naverage number revisits made searching last fruit item \n0.19 +/- 0.21.","code":"\nfruit_means = dd %>% \n  group_by(fr, pp, rr, st) %>% \n  summarise(mu=mean(murev)) %>% \n  summarise(mu=mean(mu)) %>% \n  summarise(mu=mean(mu)) %>% \n  summarise(mean=mean(mu), sd=sd(mu)) %>%\n  mutate(mean=round(mean,2), sd=round(sd,2))\n# We report the first and tenth value\nfruit_means %>% filter(fr%in%c(0,9)) %>% knitr::kable()"},{"path":"number-of-revisits.html","id":"interaction-plots","chapter":"4 Number of revisits","heading":"4.3 Interaction plots","text":"","code":""},{"path":"number-of-revisits.html","id":"stage-x-resources","chapter":"4 Number of revisits","heading":"4.3.1 Stage x Resources","text":"write code plot stage x resources interaction. stage effect significant interaction isn’t.","code":"\ndata_for_plot <-\n  dd %>% group_by(st, rr, pp) %>%\n  summarise(mean_revisits=mean(murev))\npd <- position_dodge(0.1)\nrequire(Hmisc)\ne1_nrevisits_grand_PLOT <-\n  ggplot(data=data_for_plot, aes(x=st, y=mean_revisits, group=rr, pch=rr, fill=rr))+\n  theme_bw()+\n  theme(aspect.ratio = 1, panel.grid=element_blank(), axis.title.y=element_text(angle=0,vjust=0.5,hjust=0.5))+\n  scale_fill_manual(name=\"Resource\\ndistribution\",values=c(\"white\", \"black\")) +\n  scale_shape_manual(name=\"Resource\\ndistribution\",values=c(24,19)) +\n  stat_summary(fun.data = mean_cl_normal, geom = \"errorbar\", width=0.1, position=pd) +\n  stat_summary(fun = mean, geom = \"line\", position=pd) +\n  stat_summary(fun = mean, geom = \"point\", size=4, position=pd)+\n  ggtitle(\"Number of Revisits\")+\n  ylab(\"Number\\nof\\nRevisits\")+\n  xlab(\"Trial\")+\n  scale_x_discrete(labels=c(\"early\\ntrials 1 to 5\", \"late\\ntrials 6 to 10\"))\ne1_nrevisits_grand_PLOT"},{"path":"retrieval-rate.html","id":"retrieval-rate","chapter":"5 Retrieval Rate","heading":"5 Retrieval Rate","text":"Experiment 1Table 5.1: Retrieval rate","code":"\ne1 <- readRDS(\"001-00-e1-data.RDS\")\n\n# remove things from the raw data to make it suitable for this particular analysis\n\n# remove samples that did not look at a tree\ne1 <- e1 %>% filter(fl>0)\n\n# remove the second (and any subsequent) *consecutive* duplicates\ne1 <- e1 %>% \n  group_by(pp, rr, tb) %>% \n  filter(is.na(tl != lag(tl)) | tl != lag(tl)) %>% \n  ungroup()\n\n# remove trials where they failed to get 10 fruit\ne1 <- e1 %>% \n  group_by(pp, te) %>% \n  mutate(max_fr = max(fr)) %>% \n  ungroup() %>% \n  filter(max_fr==10)\n\n# how many trees to get each fruit?\n# this is neat and it needs to be done after reducing the data to row-per-valid-tree-visit\ne1$ntrees_to_get_a_fruit = NA\nj = 0\nfor (k in seq_along(e1$ix)) {\n j = j + 1\n if (e1[k, 'fl']==2) {\n   e1[k, 'ntrees_to_get_a_fruit'] = j\n   j = 0\n }\n}\n\n# remove any remaining NAs\ne1 <- e1 %>% filter(!is.na(ntrees_to_get_a_fruit))\n\n# average over trials (and ignore stage) to yield participant means suitable for ggplot and ANOVA\nrtv = e1 %>% \n  select(pp, rr, tb, fr, ntrees_to_get_a_fruit) %>% \n  group_by(pp, rr, fr) %>% \n  summarise(mu=mean(ntrees_to_get_a_fruit)) %>% \n  ungroup() %>% \n  mutate(pp=as_factor(pp), rr=as_factor(rr), fr=as_factor(fr))\n\nsaveRDS(rtv, \"e1_retrieval_plot_data.rds\")\noptions(contrasts=c(\"contr.sum\",\"contr.poly\"))\ne1_retrievalrate_ANOVA <- \n  ezANOVA(data=rtv,\n          dv=mu,\n          wid=pp,\n          within=c(rr, fr),\n          type=3)\n\nprettify(e1_retrievalrate_ANOVA, \"Retrieval rate\")\ne1_retrievalrate_ANOVA$`Sphericity Corrections` %>% knitr::kable(row.names=F)\n# Ten points along the x axis, each participant contributes one point per cell\n\nggplot(\n  data=rtv, \n  aes(x=fr, y=mu, group=rr, pch=rr, fill=rr)\n) +\n  theme_bw()+\n  theme(aspect.ratio = 1, panel.grid=element_blank())+\n  scale_fill_manual(name=\"Resources\", values=c(\"white\", \"black\")) +\n  scale_shape_manual(name=\"Resources\", values=c(24,19)) +\n  stat_summary(fun.data = mean_cl_normal, geom = \"errorbar\", width=0.2, position=position_dodge(0.25)) +\n  stat_summary(fun = mean, geom = \"line\", position=position_dodge(0.25)) + \n  stat_summary(fun = mean, geom = \"point\", size=3, position=position_dodge(0.25))+\n  ylab(\"Mean number of trees visited to get each fruit\")+\n  xlab(\"Fruit index\")"},{"path":"retrieval-rate.html","id":"resources-means","chapter":"5 Retrieval Rate","heading":"5.1 Resources Means","text":"","code":"\nrrmeans = rtv %>% group_by(rr) %>% \n  summarise(mean=mean(mu), sd=sd(mu)) %>% \n  mutate(mean=round(mean,2), sd=round(sd,2))\nrrmeans %>% knitr::kable() %>% kable_styling(full_width = F)"},{"path":"retrieval-rate.html","id":"fruit-means","chapter":"5 Retrieval Rate","heading":"5.2 Fruit means","text":"","code":"\nfrmeans = rtv %>% group_by(fr) %>% \n  summarise(mean=mean(mu), sd=sd(mu)) %>% \n  mutate(mean=round(mean,2), sd=round(sd,2))\nfrmeans %>% knitr::kable() %>% kable_styling(full_width = F)"},{"path":"inter-tree-distance.html","id":"inter-tree-distance","chapter":"6 Inter-tree distance","heading":"6 Inter-tree distance","text":"Experiment 1","code":""},{"path":"master-plot-e1.html","id":"master-plot-e1","chapter":"7 Master plot, e1","heading":"7 Master plot, e1","text":"","code":"\npd <- position_dodge(0.1)\nmy_fgms_theme =  theme_bw()+\n  theme(\n  panel.grid        = element_blank(), \n  axis.title.y      = element_text(angle=0, vjust=0.5, hjust=0.5), \n  legend.text       = element_text(size=12), \n  legend.title      = element_text(size=12), \n  axis.text         = element_text(size=11),\n  strip.background  = element_blank(),\n  strip.text        = element_text(size=11)\n)\nretrieval_data <- readRDS(\"e1_retrieval_plot_data.rds\") \n  \np3=ggplot(data=retrieval_data, aes(y=mu, x=fr, group=rr, fill=rr, shape=rr))+\n  labs(title=\"(c): Retrieval rate\", subtitle=\"People benefit from being in a patch once they realise they are in one\")+\n  ylab(\"Number\\nof\\ntrees\\nvisited\\nto get\\neach fruit\")+\n  xlab(\"Number of fruit collected so far during trial\")+\n  my_fgms_theme+  \n  scale_fill_manual(name=\"Resource\\ndistribution\",values=c(\"white\", \"black\")) +\n  scale_shape_manual(name=\"Resource\\ndistribution\",values=c(24,19)) +\n  stat_summary(fun.data = mean_cl_normal, geom = \"errorbar\", width=0.1, position=pd) +\n  stat_summary(fun = mean, geom = \"line\", position=pd) + \n  stat_summary(fun = mean, geom = \"point\", size=3, position=pd)\np3\npp=(p1+p2)/p3/p4 + \n  plot_layout(heights = c(1, 1, 1), guides=\"collect\") +\n  plot_annotation(title = 'Figure 2: Experiment One measures')\n\nggsave(plot = pp, filename=\"e1-99-master_plot.png\",height=12,width=9)"}]
